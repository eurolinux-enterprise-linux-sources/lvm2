commit 18802ced8390aa2ca17baf8a5ec8b4125854ad9b
Author: Heinz Mauelshagen <heinzm@redhat.com>
Date:   Tue Apr 7 14:32:25 2015 +0200

    Fix incorrect lvcreate -m with raid4/5/6.
---
 WHATS_NEW        | 1 +
 tools/lvcreate.c | 8 ++++++++
 2 files changed, 9 insertions(+)

diff --git a/WHATS_NEW b/WHATS_NEW
index a5b14e4..e84dc91 100644
--- a/WHATS_NEW
+++ b/WHATS_NEW
@@ -1,5 +1,6 @@
 Version 2.02.119 - 
 ==================================
+  Don't silently accept lvcreate -m with raid4/5/6.
   Respect allocation/cling_tag_list during intial contiguous allocation.
   Add A_PARTITION_BY_TAGS set when allocated areas should not share tags.
   Log relevant PV tags when using cling allocation.
diff --git a/tools/lvcreate.c b/tools/lvcreate.c
index 3f7fe6f..e41f76c 100644
--- a/tools/lvcreate.c
+++ b/tools/lvcreate.c
@@ -474,6 +474,14 @@ static int _read_raid_params(struct cmd_context *cmd,
 		return 0;
 	}
 
+	if (arg_count(cmd, mirrors_ARG) && segtype_is_raid(lp->segtype) &&
+	    strcmp(lp->segtype->name, SEG_TYPE_NAME_RAID1) &&
+	    strcmp(lp->segtype->name, SEG_TYPE_NAME_RAID10)) {
+		log_error("Mirror argument cannot be used with segment type, %s",
+			  lp->segtype->name);
+		return 0;
+	}
+
 	/* Rates are recorded in kiB/sec/disk, not sectors/sec/disk */
 	lp->min_recovery_rate = arg_uint_value(cmd, minrecoveryrate_ARG, 0) / 2;
 	lp->max_recovery_rate = arg_uint_value(cmd, maxrecoveryrate_ARG, 0) / 2;
